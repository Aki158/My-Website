<!doctype html>
<html lang="ja" >
    <head>
        <title>Portfolio</title>
        <link rel="canonical" href="https://getbootstrap.jp/docs/5.3/examples/album/">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <link href="album.css" rel="stylesheet">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <style>
            .img-size{
                width: 500px;
                height: auto;
            }

            ul{
                margin: 0;
                padding: 0;
                list-style: none;
            }

            .custom-link {
                color: black !important;
                text-decoration: underline !important;
            }

            #backToTop {
                position: fixed;
                bottom: 20px;
                right: 20px;
                background-color: #4cadb1;
                color: white;
                border: none;
                border-radius: 4px;
                padding: 10px 20px;
                cursor: pointer;
            }
        </style>
    </head>
    <script>
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
            var backToTopButton = document.getElementById("backToTop");
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                backToTopButton.style.display = "block";
            } else {
                backToTopButton.style.display = "none";
            }
        }

        function scrollToTop() {
             // Safari
            document.body.scrollTop = 0;
            // Chrome, Firefox, IE, and Opera
            document.documentElement.scrollTop = 0;
        }

        window.addEventListener("load", (event) => {
            request = new XMLHttpRequest();
            request.open("GET", "portfolio.json");
            request.responseType = "json";
            request.send();
            request.onload = function() {
                const portfolio_hashmap_arr = JSON.parse(JSON.stringify(request.response));

                for (var i = 0; i < Object.keys(portfolio_hashmap_arr).length; i++) {
                    render_portfolio(i,portfolio_hashmap_arr,document.getElementById("portfolio"));
                }

                for (var i = 0; i < Object.keys(portfolio_hashmap_arr).length; i++) {
                    render_table(i,portfolio_hashmap_arr,document.getElementById("table_of_contents"));
                }
                
            }
        });

        function render_table(index,portfolio_hashmap_arr,table){
            const list = document.createElement("li");
            const list_index = document.createElement("span");
            const list_link = document.createElement("a");

            const list_link_str = "#portfolio"+portfolio_hashmap_arr[index].id;

            list_index.innerHTML = portfolio_hashmap_arr[index].id < 10 ? "0"+portfolio_hashmap_arr[index].id : portfolio_hashmap_arr[index].id;
            list_link.href = list_link_str;
            console.log("#portfolio"+portfolio_hashmap_arr[index].id);
            list_link.textContent = portfolio_hashmap_arr[index].title;

            list_index.classList.add("m-3");
            list_link.classList.add("custom-link");
            list.classList.add("my-3");

            list.append(list_index);
            list.append(list_link);
            table.append(list);
        }

        function render_portfolio(index,portfolio_hashmap_arr,portfolio){
            const div = document.createElement("div");
            const title = document.createElement("h3");
            const summary = document.createElement("h4");
            const thumbnail = document.createElement("img");
            const langage = document.createElement("h3");
            const langage_body = document.createElement("p");
            const border = document.createElement("p");
            const content = document.createElement("h3");
            const content_body = document.createElement("p");
            const btn_group = document.createElement("div");
            const btn_view = document.createElement("button");
            const btn_source = document.createElement("button");

            div.setAttribute("id", "portfolio"+portfolio_hashmap_arr[index].id);

            title.innerHTML = portfolio_hashmap_arr[index].title;
            summary.innerHTML = portfolio_hashmap_arr[index].summary;
            langage.innerHTML = "言語";
            langage_body.innerHTML = portfolio_hashmap_arr[index].langage;
            content.innerHTML = "説明";
            content_body.innerHTML = portfolio_hashmap_arr[index].content;
            thumbnail.src = portfolio_hashmap_arr[index].thumbnail;
            thumbnail.alt = "No image.";
            
            title.classList.add("text-white","bg-dark","p-3");
            thumbnail.classList.add("img-size","m-3");
            border.classList.add("border-bottom","border-2","border-secondary");
            btn_group.classList.add("btn-group","mb-5");
            btn_view.classList.add("btn","btn-sm","btn-outline-secondary");
            btn_source.classList.add("btn","btn-sm","btn-outline-secondary");

            btn_view.type = "button";            
            btn_view.textContent = 'View';
            btn_view.onclick = view;

            btn_source.type = "button";
            btn_source.textContent = 'Code';
            btn_source.onclick = code;

            function view(){
                window.location.href = portfolio_hashmap_arr[index].view;
            }

            function code(){
                window.location.href = portfolio_hashmap_arr[index].source;
            }

            if(portfolio_hashmap_arr[index].view !== ""){
                btn_group.appendChild(btn_view);
            }
            btn_group.appendChild(btn_source);

            div.append(title);
            div.append(summary);
            div.append(thumbnail);
            div.append(langage);
            div.append(langage_body);
            div.append(border);
            div.append(content);
            div.append(content_body);
            div.append(btn_group);
            portfolio.append(div);
        }
    </script>

    <body>
        <a id="skippy" class="sr-only sr-only-focusable" href="#content">
        <div class="container">
            <span class="skiplink-text">Skip to main content</span>
        </div>
        </a>
    </header>
    <main role="main">

    <section class="jumbotron text-center">
        <div class="container">
            <h1 class="jumbotron-heading">ポートフォリオ</h1>
            <p class="lead text-muted">個人開発/チーム開発の成果物を紹介します</p>
            <p>
                <a href="index.html" class="btn btn-primary my-2">職務経歴書を見る</a>
            </p>
        </div>
    </section>

    <div class="album py-5 bg-light">
        <div id="table" class="container my-4">
            <h2>目次</h2>
            <ul id="table_of_contents"></ul>
        </div>
        <div id="portfolio" class="container"></div>
    </div>
    <button id="backToTop" onclick="scrollToTop()" style="display:none;">⬆Back to Top</button>

    </main>

    <script src="../../assets/js/vendor/holder.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>
    window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')
    </script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script><script src="/docs/4.3/assets/js/vendor/anchor.min.js"></script>
    <script src="/docs/4.3/assets/js/vendor/clipboard.min.js"></script>
    <script src="/docs/4.3/assets/js/vendor/bs-custom-file-input.min.js"></script>
    <script src="/docs/4.3/assets/js/src/application.js"></script>
    <script src="/docs/4.3/assets/js/src/search.js"></script>
    <script src="/docs/4.3/assets/js/src/ie-emulation-modes-warning.js"></script>
    </body>
</html>
